<!--
  ~ Copyright (c) 2566. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
  ~ Morbi non lorem porttitor neque feugiat blandit. Ut vitae ipsum eget quam lacinia accumsan.
  ~ Etiam sed turpis ac ipsum condimentum fringilla. Maecenas magna.
  ~ Proin dapibus sapien vel ante. Aliquam erat volutpat. Pellentesque sagittis ligula eget metus.
  ~ Vestibulum commodo. Ut rhoncus gravida arcu.
  -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Login</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css" rel="stylesheet">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.1.0/css/adminlte.min.css" rel="stylesheet">
</head>
<body>

<div class="wrapper">

    <div class="container">

        <div class="row">
            <div class="col-md-4">

                <h1>Login</h1>

                <form action="/login" method="POST">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" class="form-control" id="username" name="username" placeholder="Username">
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" class="form-control" id="password" name="password" placeholder="Password">
                    </div>
                    <button type="submit" class="btn btn-primary">Login</button>
                </form>

            </div>
        </div>

    </div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.1.0/js/adminlte.min.js"></script>

<script>
    $(document).ready(function() {

        // Handle login form submit
        $("#loginForm").submit(function(e) {
            e.preventDefault();

            // Get form data
            var username = $("#username").val();
            var password = $("#password").val();

            // Send login request to server
            $.ajax({
                url: "http://127.0.0.1:9999/cms/authen/login",
                method: "POST",
                data: {
                    userName: username,
                    passWord: password
                },
                success: function(response) {
                    // If response status is 200, redirect to dashboard
                    if (response.status === 200) {
                        window.location.href = "http://127.0.0.1:9999/dashboard";
                    } else {
                        // Otherwise, show error message
                        alert("Login failed.");
                    }
                },
                error: function(error) {
                    // Show error message
                    alert(error.responseText);
                }
            });
        });

    });
</script>
</body>
</html>
